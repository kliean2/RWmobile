{"timestamp":"2025-05-06 01:20:22","level":"error","message":"Database connection lost - middleware check"}
{"timestamp":"2025-05-06 01:24:46","level":"error","message":"CRITICAL memory usage: 94% of available heap space used"}
{"timestamp":"2025-05-06 01:33:57","level":"error","message":"CRITICAL memory usage: 93% of available heap space used"}
{"timestamp":"2025-05-06 01:34:59","level":"error","message":"CRITICAL memory usage: 96% of available heap space used"}
{"timestamp":"2025-05-06 01:37:05","level":"error","message":"CRITICAL memory usage: 93% of available heap space used"}
{"timestamp":"2025-05-06 01:51:14","level":"error","message":"CRITICAL memory usage: 94% of available heap space used"}
{"timestamp":"2025-05-06 01:52:19","level":"error","message":"CRITICAL memory usage: 97% of available heap space used"}
{"timestamp":"2025-05-06 01:53:25","level":"error","message":"CRITICAL memory usage: 94% of available heap space used"}
{"timestamp":"2025-05-06 01:57:34","level":"error","message":"CRITICAL memory usage: 95% of available heap space used"}
{"timestamp":"2025-05-06 01:58:37","level":"error","message":"CRITICAL memory usage: 93% of available heap space used"}
{"timestamp":"2025-05-06 13:00:56","level":"error","message":"MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 13:00:56","level":"error","message":"Unhandled Rejection: MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 13:01:02","level":"error","message":"Uncaught Exception: Error: write after end\n    at writeAfterEnd (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:264:12)\n    at Writable.write (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:300:21)\n    at File.log (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\lib\\winston\\transports\\file.js:222:34)\n    at RejectionStream._write (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\lib\\winston\\rejection-stream.js:46:29)\n    at doWrite (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:390:139)\n    at writeOrBuffer (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:381:5)\n    at Writable.write (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:302:11)\n    at DerivedLogger.ondata (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_readable.js:629:20)\n    at DerivedLogger.emit (node:events:536:35)\n    at addChunk (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_readable.js:279:12)"}
{"timestamp":"2025-05-06 13:01:02","level":"error","message":"[CRITICAL] Uncaught Exception: write after end"}
{"timestamp":"2025-05-06 13:01:02","level":"error","message":"Error: write after end\n    at writeAfterEnd (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:264:12)\n    at Writable.write (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:300:21)\n    at File.log (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\lib\\winston\\transports\\file.js:222:34)\n    at RejectionStream._write (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\lib\\winston\\rejection-stream.js:46:29)\n    at doWrite (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:390:139)\n    at writeOrBuffer (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:381:5)\n    at Writable.write (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:302:11)\n    at DerivedLogger.ondata (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_readable.js:629:20)\n    at DerivedLogger.emit (node:events:536:35)\n    at addChunk (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_readable.js:279:12)"}
{"timestamp":"2025-05-06 13:01:26","level":"error","message":"Could not close connections in time, forcefully shutting down"}
{"timestamp":"2025-05-06 13:09:04","level":"error","message":"MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 13:09:04","level":"error","message":"Unhandled Rejection: MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 13:09:34","level":"error","message":"Could not close connections in time, forcefully shutting down"}
{"timestamp":"2025-05-06 13:18:25","level":"error","message":"ValidationError: Order validation failed: orderType: `pos` is not a valid enum value for path `orderType`.\n    at Document.invalidate (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\document.js:3351:32)\n    at C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\document.js:3112:17\n    at C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)"}
{"timestamp":"2025-05-06 13:19:03","level":"error","message":"ValidationError: Order validation failed: orderType: `pos` is not a valid enum value for path `orderType`.\n    at Document.invalidate (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\document.js:3351:32)\n    at C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\document.js:3112:17\n    at C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)"}
{"timestamp":"2025-05-06 13:58:30","level":"error","message":"MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 13:58:30","level":"error","message":"Unhandled Rejection: MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 13:59:00","level":"error","message":"Could not close connections in time, forcefully shutting down"}
{"timestamp":"2025-05-06 14:21:40","level":"error","message":"MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 14:21:40","level":"error","message":"Unhandled Rejection: MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 14:22:10","level":"error","message":"Could not close connections in time, forcefully shutting down"}
{"timestamp":"2025-05-06 14:22:57","level":"error","message":"MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 14:22:57","level":"error","message":"Unhandled Rejection: MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\Ring-Wing-TEST3\\Ring-Wing\\ring-and-wing-backend\\server.js:343:25)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 14:23:27","level":"error","message":"Could not close connections in time, forcefully shutting down"}
{"timestamp":"2025-05-06 23:37:29","level":"error","message":"MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\server.js:386:29\n    at new Promise (<anonymous>)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\server.js:385:30)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 23:37:29","level":"error","message":"Unhandled Rejection: MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\server.js:386:29\n    at new Promise (<anonymous>)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\server.js:385:30)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 23:37:31","level":"error","message":"Uncaught Exception: Error: write after end\n    at writeAfterEnd (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:264:12)\n    at Writable.write (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:300:21)\n    at File.log (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\lib\\winston\\transports\\file.js:222:34)\n    at RejectionStream._write (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\lib\\winston\\rejection-stream.js:46:29)\n    at doWrite (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:390:139)\n    at writeOrBuffer (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:381:5)\n    at Writable.write (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:302:11)\n    at DerivedLogger.ondata (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_readable.js:629:20)\n    at DerivedLogger.emit (node:events:536:35)\n    at addChunk (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_readable.js:279:12)"}
{"timestamp":"2025-05-06 23:37:31","level":"error","message":"[CRITICAL] Uncaught Exception: write after end"}
{"timestamp":"2025-05-06 23:37:31","level":"error","message":"Error: write after end\n    at writeAfterEnd (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:264:12)\n    at Writable.write (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:300:21)\n    at File.log (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\lib\\winston\\transports\\file.js:222:34)\n    at RejectionStream._write (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\lib\\winston\\rejection-stream.js:46:29)\n    at doWrite (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:390:139)\n    at writeOrBuffer (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:381:5)\n    at Writable.write (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_writable.js:302:11)\n    at DerivedLogger.ondata (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_readable.js:629:20)\n    at DerivedLogger.emit (node:events:536:35)\n    at addChunk (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\node_modules\\winston\\node_modules\\readable-stream\\lib\\_stream_readable.js:279:12)"}
{"timestamp":"2025-05-06 23:40:43","level":"error","message":"MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\server.js:386:29\n    at new Promise (<anonymous>)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\server.js:385:30)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
{"timestamp":"2025-05-06 23:40:43","level":"error","message":"Unhandled Rejection: MongooseError: Connection.prototype.close() no longer accepts a callback\n    at NativeConnection.close (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\node_modules\\mongoose\\lib\\connection.js:1205:11)\n    at C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\server.js:386:29\n    at new Promise (<anonymous>)\n    at Server.<anonymous> (C:\\Users\\kliean\\Downloads\\ringandwing-mobileprototype\\RingWing-v6\\ring-and-wing-backend\\server.js:385:30)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)"}
